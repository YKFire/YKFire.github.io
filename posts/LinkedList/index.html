<!DOCTYPE html><html lang="zh-CN" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.3" /><meta property="og:title" content="ArrayList å’Œ LinkedList çš„åŒºåˆ«" /><meta name="author" content="YKFire" /><meta property="og:locale" content="zh_CN" /><meta name="description" content="ArrayList å’Œ LinkedList çš„åŒºåˆ«" /><meta property="og:description" content="ArrayList å’Œ LinkedList çš„åŒºåˆ«" /><link rel="canonical" href="/posts/LinkedList/" /><meta property="og:url" content="/posts/LinkedList/" /><meta property="og:site_name" content="YKFire" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-01-14T07:34:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="ArrayList å’Œ LinkedList çš„åŒºåˆ«" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@YKFire" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"YKFire"},"dateModified":"2023-01-14T07:34:00+00:00","datePublished":"2023-01-14T07:34:00+00:00","description":"ArrayList å’Œ LinkedList çš„åŒºåˆ«","headline":"ArrayList å’Œ LinkedList çš„åŒºåˆ«","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/LinkedList/"},"url":"/posts/LinkedList/"}</script><title>ArrayList å’Œ LinkedList çš„åŒºåˆ« | YKFire</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="YKFire"><meta name="application-name" content="YKFire"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/config/z1.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">YKFire</a></div><div class="site-subtitle font-italic">æ€•ä»€ä¹ˆçœŸç†æ— ç©·ï¼Œè¿›ä¸€å¯¸ï¼Œæœ‰ä¸€å¯¸çš„æ¬¢å–œ.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>é¦–é¡µ</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>åˆ†ç±»</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>æ ‡ç­¾</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>å½’æ¡£</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>å…³äº</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/YKFire" aria-label="github" target="_blank" rel="noopener noreferrer"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener noreferrer"> <i class="fab fa-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['1183491613','qq.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> é¦–é¡µ </a> </span> <span>ArrayList å’Œ LinkedList çš„åŒºåˆ«</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> æ–‡ç« </div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="æœç´¢..."> </span> <span id="search-cancel" >å–æ¶ˆ</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>ArrayList å’Œ LinkedList çš„åŒºåˆ«</h1><div class="post-meta text-muted"> <span> å‘è¡¨äº <em class="" data-ts="1673681640" data-df="YYYY/MM/DD" data-toggle="tooltip" data-placement="bottom"> 2023/01/14 </em> </span><div class="d-flex justify-content-between"> <span> ä½œè€… <em> <a href=""></a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="4093 å­—"> <em>22 åˆ†é’Ÿ</em>é˜…è¯»</span></div></div></div><div class="post-content"><h1 id="arraylist-å’Œ-linkedlist-çš„åŒºåˆ«">ArrayList å’Œ LinkedList çš„åŒºåˆ«</h1><h2 id="ä¸€linkedlistçš„ç‰¹ç‚¹"><span class="mr-2">ä¸€ã€LinkedListçš„ç‰¹ç‚¹</span><a href="#ä¸€linkedlistçš„ç‰¹ç‚¹" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="1ä¸¤è€…çš„åŒºåˆ«"><span class="mr-2">1ã€ä¸¤è€…çš„åŒºåˆ«</span><a href="#1ä¸¤è€…çš„åŒºåˆ«" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>1ã€æ•°æ®ç»“æ„ï¼š</strong> åœ¨æ•°æ®ç»“æ„ä¸Šï¼ŒArrayList å’Œ LinkedList éƒ½æ˜¯ â€œçº¿æ€§è¡¨â€ï¼Œéƒ½ç»§æ‰¿äº Java çš„ <code class="language-plaintext highlighter-rouge">List</code> æ¥å£ã€‚å¦å¤– LinkedList è¿˜å®ç°äº† Java çš„ <code class="language-plaintext highlighter-rouge">Deque</code> æ¥å£ï¼Œæ˜¯åŸºäºé“¾è¡¨çš„æ ˆæˆ–é˜Ÿåˆ—ï¼Œä¸ä¹‹å¯¹åº”çš„æ˜¯ <code class="language-plaintext highlighter-rouge">ArrayDeque</code> åŸºäºæ•°ç»„çš„æ ˆæˆ–é˜Ÿåˆ—ï¼›</p><p><strong>2ã€çº¿ç¨‹å®‰å…¨ï¼š</strong> ArrayList å’Œ LinkedList éƒ½ä¸è€ƒè™‘çº¿ç¨‹åŒæ­¥ï¼Œä¸ä¿è¯çº¿ç¨‹å®‰å…¨ï¼›</p><p><strong>3ã€åº•å±‚å®ç°ï¼š</strong> åœ¨åº•å±‚å®ç°ä¸Šï¼ŒArrayList æ˜¯åŸºäºåŠ¨æ€æ•°ç»„çš„ï¼Œè€Œ LinkedList æ˜¯åŸºäºåŒå‘é“¾è¡¨çš„ã€‚äº‹å®ä¸Šï¼Œå®ƒä»¬å¾ˆå¤šç‰¹æ€§çš„åŒºåˆ«éƒ½æ˜¯å› ä¸ºåº•å±‚å®ç°ä¸åŒå¼•èµ·çš„ã€‚æ¯”å¦‚è¯´ï¼š</p><ul><li><strong>åœ¨éå†é€Ÿåº¦ä¸Šï¼š</strong> æ•°ç»„æ˜¯ä¸€å—è¿ç»­å†…å­˜ç©ºé—´ï¼ŒåŸºäºå±€éƒ¨æ€§åŸç†èƒ½å¤Ÿæ›´å¥½åœ°å‘½ä¸­ CPU ç¼“å­˜è¡Œï¼Œè€Œé“¾è¡¨æ˜¯ç¦»æ•£çš„å†…å­˜ç©ºé—´å¯¹ç¼“å­˜è¡Œä¸å‹å¥½ï¼›<li><strong>åœ¨è®¿é—®é€Ÿåº¦ä¸Šï¼š</strong> æ•°ç»„æ˜¯ä¸€å—è¿ç»­å†…å­˜ç©ºé—´ï¼Œæ”¯æŒ O(1) æ—¶é—´å¤æ‚åº¦éšæœºè®¿é—®ï¼Œè€Œé“¾è¡¨éœ€è¦ O(n) æ—¶é—´å¤æ‚åº¦æŸ¥æ‰¾å…ƒç´ ï¼›<li><strong>åœ¨æ·»åŠ å’Œåˆ é™¤æ“ä½œä¸Šï¼š</strong> å¦‚æœæ˜¯åœ¨æ•°ç»„çš„æœ«å°¾æ“ä½œåªéœ€è¦ O(1) æ—¶é—´å¤æ‚åº¦ï¼Œä½†åœ¨æ•°ç»„ä¸­é—´æ“ä½œéœ€è¦æ¬è¿å…ƒç´ ï¼Œæ‰€ä»¥éœ€è¦ O(n)æ—¶é—´å¤æ‚åº¦ï¼Œè€Œé“¾è¡¨çš„åˆ é™¤æ“ä½œæœ¬èº«åªæ˜¯ä¿®æ”¹å¼•ç”¨æŒ‡å‘ï¼Œåªéœ€è¦ O(1) æ—¶é—´å¤æ‚åº¦ï¼ˆå¦‚æœè€ƒè™‘æŸ¥è¯¢è¢«åˆ é™¤èŠ‚ç‚¹çš„æ—¶é—´ï¼Œå¤æ‚åº¦åˆ†æä¸Šä¾ç„¶æ˜¯ O(n)ï¼Œåœ¨å·¥ç¨‹åˆ†æä¸Šè¿˜æ˜¯æ¯”æ•°ç»„å¿«ï¼‰ï¼›<li><strong>é¢å¤–å†…å­˜æ¶ˆè€—ä¸Šï¼š</strong> ArrayList åœ¨æ•°ç»„çš„å°¾éƒ¨å¢åŠ äº†é—²ç½®ä½ç½®ï¼Œè€Œ LinkedList åœ¨èŠ‚ç‚¹ä¸Šå¢åŠ äº†å‰é©±å’Œåç»§æŒ‡é’ˆã€‚</ul><h3 id="2linkedlistçš„å®ç°æ¥å£"><span class="mr-2">2ã€LinkedListçš„å®ç°æ¥å£</span><a href="#2linkedlistçš„å®ç°æ¥å£" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>åœ¨æ•°æ®ç»“æ„ä¸Šï¼ŒLinkedList ä¸ä»…å®ç°äº†ä¸ ArrayList ç›¸åŒçš„ List æ¥å£ï¼Œè¿˜å®ç°äº† Deque æ¥å£ï¼ˆç»§æ‰¿äº Queue æ¥å£ï¼‰ã€‚</p><p>Deque æ¥å£è¡¨ç¤ºä¸€ä¸ªåŒç«¯é˜Ÿåˆ—ï¼ˆDouble Ended Queueï¼‰ï¼Œå…è®¸åœ¨é˜Ÿåˆ—çš„é¦–å°¾ä¸¤ç«¯æ“ä½œï¼Œæ‰€ä»¥æ—¢èƒ½å®ç°é˜Ÿåˆ—è¡Œä¸ºï¼Œä¹Ÿèƒ½å®ç°æ ˆè¡Œä¸ºã€‚</p><p><strong>Queue æ¥å£ï¼š</strong></p><p><a href="/assets/blog_res/2023-01-14-LinkedList.assets/image-20230206154010842.png" class="popup img-link "><img data-src="/assets/blog_res/2023-01-14-LinkedList.assets/image-20230206154010842.png" alt="Queue æ¥å£" class="lazyload" data-proofer-ignore></a></p><p>Queue çš„ API å¯ä»¥åˆ†ä¸º 2 ç±»ï¼ŒåŒºåˆ«åœ¨äºæ–¹æ³•çš„æ‹’ç»ç­–ç•¥ä¸Šï¼š</p><ul><li>æŠ›å¼‚å¸¸ï¼š<ul><li>å‘ç©ºé˜Ÿåˆ—å–æ•°æ®ï¼Œä¼šæŠ›å‡º NoSuchElementException å¼‚å¸¸ï¼›<li>å‘å®¹é‡æ»¡çš„é˜Ÿåˆ—åŠ æ•°æ®ï¼Œä¼šæŠ›å‡º IllegalStateException å¼‚å¸¸ã€‚</ul><li>è¿”å›ç‰¹æ®Šå€¼ï¼š<ul><li>å‘ç©ºé˜Ÿåˆ—å–æ•°æ®ï¼Œä¼šè¿”å› nullï¼›<li>å‘å®¹é‡æ»¡çš„é˜Ÿåˆ—åŠ æ•°æ®ï¼Œä¼šè¿”å› falseã€‚</ul></ul><p><strong>Deque æ¥å£ï¼š</strong></p><p>Java æ²¡æœ‰æä¾›æ ‡å‡†çš„æ ˆæ¥å£ï¼ˆå¾ˆå¥½å¥‡ä¸ºä»€ä¹ˆä¸æä¾›ï¼‰ï¼Œè€Œæ˜¯æ”¾åœ¨ Deque æ¥å£ä¸­ï¼š</p><p><a href="/assets/blog_res/2023-01-14-LinkedList.assets/image-20230206154038477.png" class="popup img-link "><img data-src="/assets/blog_res/2023-01-14-LinkedList.assets/image-20230206154038477.png" alt="Deque æ¥å£" class="lazyload" data-proofer-ignore></a></p><p>é™¤äº†æ ‡å‡†çš„é˜Ÿåˆ—å’Œæ ˆè¡Œä¸ºï¼ŒDeque æ¥å£è¿˜æä¾›äº† 12 ä¸ªåœ¨ä¸¤ç«¯æ“ä½œçš„æ–¹æ³•ï¼š</p><p><a href="/assets/blog_res/2023-01-14-LinkedList.assets/image-20230206154058704.png" class="popup img-link "><img data-src="/assets/blog_res/2023-01-14-LinkedList.assets/image-20230206154058704.png" alt="image-20230206154058704" class="lazyload" data-proofer-ignore></a></p><h2 id="äºŒæºç åˆ†æ"><span class="mr-2">äºŒã€æºç åˆ†æ</span><a href="#äºŒæºç åˆ†æ" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="1linkedlist-çš„å±æ€§"><span class="mr-2">1ã€LinkedList çš„å±æ€§</span><a href="#1linkedlist-çš„å±æ€§" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>LinkedList åº•å±‚æ˜¯ä¸€ä¸ª Node åŒå‘é“¾è¡¨ï¼ŒNode èŠ‚ç‚¹ä¸­ä¼šæŒæœ‰æ•°æ® E ä»¥åŠ prev ä¸next ä¸¤ä¸ªæŒ‡é’ˆï¼›<li>LinkedList ç”¨ <code class="language-plaintext highlighter-rouge">first</code> å’Œ <code class="language-plaintext highlighter-rouge">last</code> æŒ‡é’ˆæŒ‡å‘é“¾è¡¨çš„å¤´å°¾æŒ‡é’ˆã€‚</ul><p>LinkedList çš„å±æ€§å¾ˆå¥½ç†è§£çš„ï¼Œä¸å‡ºæ„å¤–çš„è¯åˆæœ‰å°æœ‹å‹å‡ºæ¥ä¸¾æ‰‹æé—®äº†ï¼š</p><ul><li><strong>ğŸ™‹ğŸ»â€â™€ï¸ ç–‘é—® 1ï¼šä¸ºä»€ä¹ˆå­—æ®µéƒ½ä¸å£°æ˜ <code class="language-plaintext highlighter-rouge">private</code> å…³é”®å­—ï¼Ÿ</strong></ul><p>è¿™ä¸ªé—®é¢˜ç›´æ¥å›ç­”å§ã€‚æˆ‘çš„ç†è§£æ˜¯ï¼šå› ä¸ºå†…éƒ¨ç±»åœ¨ç¼–è¯‘åä¼šç”Ÿæˆç‹¬ç«‹çš„ Class æ–‡ä»¶ï¼Œå¦‚æœå¤–éƒ¨ç±»çš„å­—æ®µæ˜¯ private ç±»å‹ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å°±éœ€è¦é€šè¿‡æ–¹æ³•è°ƒç”¨ï¼Œè€Œ non-private å­—æ®µå°±å¯ä»¥ç›´æ¥è®¿é—®å­—æ®µã€‚</p><ul><li><strong>ğŸ™‹ğŸ»â€â™€ï¸ ç–‘é—® 2ï¼šä¸ºä»€ä¹ˆå­—æ®µéƒ½å£°æ˜ <code class="language-plaintext highlighter-rouge">transient</code> å…³é”®å­—ï¼Ÿ</strong></ul><p>è¿™ä¸ªé—®é¢˜æˆ‘ä»¬åœ¨åˆ†ææºç çš„è¿‡ç¨‹ä¸­å›ç­”ã€‚</p><p>ç–‘é—®æ¯” ArrayList å°‘å¾ˆå¤šï¼ŒLinkedList çœŸé¦™ï¼ˆè¿˜æ˜¯åˆ«é«˜å…´å¾—å¤ªæ—©å§ï¼‰ã€‚</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">LinkedList</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span>
    <span class="kd">extends</span> <span class="nc">AbstractSequentialList</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span>
    <span class="kd">implements</span> <span class="nc">List</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;,</span> <span class="nc">Deque</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;,</span> <span class="nc">Cloneable</span><span class="o">,</span> <span class="n">java</span><span class="o">.</span><span class="na">io</span><span class="o">.</span><span class="na">Serializable</span> <span class="o">{</span>

    <span class="c1">// ç–‘é—® 1ï¼šä¸ºä»€ä¹ˆå­—æ®µéƒ½ä¸å£°æ˜ private å…³é”®å­—ï¼Ÿ</span>
    <span class="c1">// ç–‘é—® 2ï¼šä¸ºä»€ä¹ˆå­—æ®µéƒ½å£°æ˜ transient å…³é”®å­—ï¼Ÿ</span>
    <span class="c1">// å…ƒç´ ä¸ªæ•°</span>
    <span class="kd">transient</span> <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

    <span class="c1">// å¤´æŒ‡é’ˆ</span>
    <span class="kd">transient</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">first</span><span class="o">;</span>

    <span class="c1">// å°¾æŒ‡é’ˆ</span>
    <span class="kd">transient</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">last</span><span class="o">;</span>

    <span class="c1">// é“¾è¡¨èŠ‚ç‚¹</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="o">{</span>
        <span class="c1">// èŠ‚ç‚¹æ•°æ®</span>
        <span class="c1">// ï¼ˆç±»å‹æ“¦é™¤åï¼šObject item;ï¼‰</span>
        <span class="no">E</span> <span class="n">item</span><span class="o">;</span>
        <span class="c1">// å‰é©±æŒ‡é’ˆ</span>
        <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">next</span><span class="o">;</span>
        <span class="c1">// åç»§æŒ‡é’ˆ</span>
        <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">prev</span><span class="o">;</span>

        <span class="nc">Node</span><span class="o">(</span><span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">prev</span><span class="o">,</span> <span class="no">E</span> <span class="n">element</span><span class="o">,</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">next</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">item</span> <span class="o">=</span> <span class="n">element</span><span class="o">;</span>
            <span class="k">this</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="n">next</span><span class="o">;</span>
            <span class="k">this</span><span class="o">.</span><span class="na">prev</span> <span class="o">=</span> <span class="n">prev</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><h3 id="2linkedlist-çš„æ„é€ æ–¹æ³•"><span class="mr-2">2ã€LinkedList çš„æ„é€ æ–¹æ³•</span><a href="#2linkedlist-çš„æ„é€ æ–¹æ³•" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>LinkedList æœ‰ 2 ä¸ªæ„é€ æ–¹æ³•ï¼š</p><ul><li><strong>1ã€æ— å‚æ„é€ æ–¹æ³•ï¼š</strong> no-opï¼›<li><strong>2ã€å¸¦é›†åˆçš„æ„é€ ï¼š</strong> åœ¨é“¾è¡¨æœ«å°¾æ·»åŠ æ•´ä¸ªé›†åˆï¼Œå†…éƒ¨è°ƒç”¨äº† addAll æ–¹æ³•å°†æ•´ä¸ªé›†åˆæ·»åŠ åˆ°æ•°ç»„çš„æœ«å°¾ã€‚</ul><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="c1">// æ— å‚æ„é€ æ–¹æ³•</span>
<span class="kd">public</span> <span class="nf">LinkedList</span><span class="o">()</span> <span class="o">{</span>
<span class="o">}</span>

<span class="c1">// å¸¦é›†åˆçš„æ„é€ æ–¹æ³•</span>
<span class="kd">public</span> <span class="nf">LinkedList</span><span class="o">(</span><span class="nc">Collection</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="no">E</span><span class="o">&gt;</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">();</span>
    <span class="n">addAll</span><span class="o">(</span><span class="n">c</span><span class="o">);</span>
<span class="o">}</span>

<span class="c1">// åœ¨é“¾è¡¨å°¾éƒ¨æ·»åŠ é›†åˆ</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">addAll</span><span class="o">(</span><span class="nc">Collection</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="no">E</span><span class="o">&gt;</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// ç´¢å¼•ä¸º sizeï¼Œç­‰äºåœ¨é“¾è¡¨å°¾éƒ¨æ·»åŠ </span>
    <span class="k">return</span> <span class="nf">addAll</span><span class="o">(</span><span class="n">size</span><span class="o">,</span> <span class="n">c</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div><h3 id="3linkedlist-çš„æ·»åŠ æ–¹æ³•"><span class="mr-2">3ã€LinkedList çš„æ·»åŠ æ–¹æ³•</span><a href="#3linkedlist-çš„æ·»åŠ æ–¹æ³•" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>LinkedList æä¾›äº†éå¸¸å¤šçš„ <code class="language-plaintext highlighter-rouge">addXXX</code> æ–¹æ³•ï¼Œå†…éƒ¨éƒ½æ˜¯è°ƒç”¨ä¸€ç³»åˆ— <code class="language-plaintext highlighter-rouge">linkFirst</code>ã€<code class="language-plaintext highlighter-rouge">linkLast</code> æˆ– <code class="language-plaintext highlighter-rouge">linkBefore</code> å®Œæˆçš„ã€‚å¦‚æœåœ¨é“¾è¡¨ä¸­é—´æ·»åŠ èŠ‚ç‚¹æ—¶ï¼Œä¼šç”¨åˆ° node(index) æ–¹æ³•æŸ¥è¯¢æŒ‡å®šä½ç½®çš„èŠ‚ç‚¹ã€‚</p><p>å…¶å®ï¼Œæˆ‘ä»¬ä¼šå‘ç°æ‰€æœ‰æ·»åŠ çš„é€»è¾‘éƒ½å¯ä»¥ç”¨ 6 ä¸ªæ­¥éª¤æ¦‚æ‹¬ï¼š</p><ul><li><strong>æ­¥éª¤ 1ï¼š</strong> æ‰¾åˆ°æ’å…¥ä½ç½®çš„åç»§èŠ‚ç‚¹ï¼ˆåœ¨å¤´éƒ¨æ’å…¥å°±æ˜¯ firstï¼Œåœ¨å°¾éƒ¨æ’å…¥å°±æ˜¯ nullï¼‰ï¼›<li><strong>æ­¥éª¤ 2ï¼š</strong> æ„é€ æ–°èŠ‚ç‚¹ï¼›<li><strong>æ­¥éª¤ 3ï¼š</strong> å°†æ–°èŠ‚ç‚¹çš„ prev æŒ‡é’ˆæŒ‡å‘å‰é©±èŠ‚ç‚¹ï¼ˆåœ¨å¤´éƒ¨æ’å…¥å°±æ˜¯ nullï¼Œåœ¨å°¾éƒ¨æ’å…¥å°±æ˜¯ lastï¼‰ï¼›<li><strong>æ­¥éª¤ 4ï¼š</strong> å°†æ–°èŠ‚ç‚¹çš„ next æŒ‡é’ˆæŒ‡å‘åç»§èŠ‚ç‚¹ï¼ˆåœ¨å¤´éƒ¨æ’å…¥å°±æ˜¯ firstï¼Œåœ¨å°¾éƒ¨æ’å…¥å°±æ˜¯ nullï¼‰ï¼›<li><strong>æ­¥éª¤ 5ï¼š</strong> å°†å‰é©±èŠ‚ç‚¹çš„ next æŒ‡é’ˆæŒ‡å‘æ–°èŠ‚ç‚¹ï¼ˆåœ¨å¤´éƒ¨æ’å…¥æ²¡æœ‰è¿™ä¸ªæ­¥éª¤ï¼‰ï¼›<li><strong>æ­¥éª¤ 6ï¼š</strong> å°†åç»§èŠ‚ç‚¹çš„ prev æŒ‡é’ˆæŒ‡å‘æ–°èŠ‚ç‚¹ï¼ˆåœ¨å°¾éƒ¨æ’å…¥æ²¡æœ‰è¿™ä¸ªæ­¥éª¤ï¼‰ã€‚</ul><p>åˆ†æä¸€ä¸‹æ·»åŠ æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦ï¼ŒåŒºåˆ†åœ¨é“¾è¡¨ä¸¤ç«¯æˆ–ä¸­é—´æ·»åŠ å…ƒç´ çš„æƒ…å†µå…±ï¼š</p><ul><li><strong>å¦‚æœæ˜¯åœ¨é“¾è¡¨é¦–å°¾ä¸¤ç«¯æ·»åŠ ï¼š</strong> åªéœ€è¦ O(1) æ—¶é—´å¤æ‚åº¦ï¼›<li><strong>å¦‚æœåœ¨é“¾è¡¨ä¸­é—´æ·»åŠ ï¼š</strong> ç”±äºéœ€è¦å®šä½åˆ°æ·»åŠ ä½ç½®çš„å‰é©±å’Œåç»§èŠ‚ç‚¹ï¼Œæ‰€ä»¥éœ€è¦ O(n) æ—¶é—´å¤æ‚åº¦ã€‚å¦‚æœäº‹å…ˆå·²ç»è·å¾—äº†æ·»åŠ ä½ç½®çš„èŠ‚ç‚¹ï¼Œå°±åªéœ€è¦ O(1) æ—¶é—´å¤æ‚åº¦ã€‚</ul><p>æ·»åŠ æ–¹æ³•</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kt">void</span> <span class="nf">addFirst</span><span class="o">(</span><span class="no">E</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">linkFirst</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">addLast</span><span class="o">(</span><span class="no">E</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">linkLast</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">add</span><span class="o">(</span><span class="no">E</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">linkLast</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
    <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">,</span> <span class="no">E</span> <span class="n">element</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">checkPositionIndex</span><span class="o">(</span><span class="n">index</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">index</span> <span class="o">==</span> <span class="n">size</span><span class="o">)</span>
        <span class="c1">// åœ¨å°¾éƒ¨æ·»åŠ </span>
        <span class="n">linkLast</span><span class="o">(</span><span class="n">element</span><span class="o">);</span>
    <span class="k">else</span>
        <span class="c1">// åœ¨æŒ‡å®šä½ç½®æ·»åŠ </span>
        <span class="n">linkBefore</span><span class="o">(</span><span class="n">element</span><span class="o">,</span> <span class="n">node</span><span class="o">(</span><span class="n">index</span><span class="o">));</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">addAll</span><span class="o">(</span><span class="nc">Collection</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="no">E</span><span class="o">&gt;</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="nf">addAll</span><span class="o">(</span><span class="n">size</span><span class="o">,</span> <span class="n">c</span><span class="o">);</span>
<span class="o">}</span>

<span class="c1">// åœ¨é“¾è¡¨å¤´éƒ¨æ·»åŠ </span>
<span class="kd">private</span> <span class="kt">void</span> <span class="nf">linkFirst</span><span class="o">(</span><span class="no">E</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// 1. æ‰¾åˆ°æ’å…¥ä½ç½®çš„åç»§èŠ‚ç‚¹ï¼ˆfirstï¼‰</span>
    <span class="kd">final</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">f</span> <span class="o">=</span> <span class="n">first</span><span class="o">;</span>
    <span class="c1">// 2. æ„é€ æ–°èŠ‚ç‚¹</span>
    <span class="c1">// 3. å°†æ–°èŠ‚ç‚¹çš„ prev æŒ‡é’ˆæŒ‡å‘å‰é©±èŠ‚ç‚¹ï¼ˆnullï¼‰</span>
    <span class="c1">// 4. å°†æ–°èŠ‚ç‚¹çš„ next æŒ‡é’ˆæŒ‡å‘åç»§èŠ‚ç‚¹ï¼ˆfï¼‰</span>
    <span class="c1">// 5. å°†å‰é©±èŠ‚ç‚¹çš„ next æŒ‡é’ˆæŒ‡å‘æ–°èŠ‚ç‚¹ï¼ˆå‰é©±èŠ‚ç‚¹æ˜¯ nullï¼Œæ‰€ä»¥æ²¡æœ‰è¿™ä¸ªæ­¥éª¤ï¼‰</span>
    <span class="kd">final</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">newNode</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Node</span><span class="o">&lt;&gt;(</span><span class="kc">null</span><span class="o">,</span> <span class="n">e</span><span class="o">,</span> <span class="n">f</span><span class="o">);</span>
    <span class="c1">// ä¿®æ”¹ first æŒ‡é’ˆ</span>
    <span class="n">first</span> <span class="o">=</span> <span class="n">newNode</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">f</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
        <span class="c1">// f ä¸º null è¯´æ˜é¦–ä¸ªæ·»åŠ çš„å…ƒç´ ï¼Œéœ€è¦ä¿®æ”¹ last æŒ‡é’ˆ</span>
        <span class="n">last</span> <span class="o">=</span> <span class="n">newNode</span><span class="o">;</span>
    <span class="k">else</span>
        <span class="c1">// 6. å°†åç»§èŠ‚ç‚¹çš„ prev æŒ‡é’ˆæŒ‡å‘æ–°èŠ‚ç‚¹</span>
        <span class="n">f</span><span class="o">.</span><span class="na">prev</span> <span class="o">=</span> <span class="n">newNode</span><span class="o">;</span>
    <span class="n">size</span><span class="o">++;</span>
    <span class="n">modCount</span><span class="o">++;</span>
<span class="o">}</span>

<span class="c1">// åœ¨é“¾è¡¨å°¾éƒ¨æ·»åŠ </span>
<span class="kt">void</span> <span class="nf">linkLast</span><span class="o">(</span><span class="no">E</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">l</span> <span class="o">=</span> <span class="n">last</span><span class="o">;</span>
    <span class="c1">// 1. æ‰¾åˆ°æ’å…¥ä½ç½®çš„åç»§èŠ‚ç‚¹ï¼ˆnullï¼‰</span>
    <span class="c1">// 2. æ„é€ æ–°èŠ‚ç‚¹</span>
    <span class="c1">// 3. å°†æ–°èŠ‚ç‚¹çš„ prev æŒ‡é’ˆæŒ‡å‘å‰é©±èŠ‚ç‚¹ï¼ˆlï¼‰</span>
    <span class="c1">// 4. å°†æ–°èŠ‚ç‚¹çš„ next æŒ‡é’ˆæŒ‡å‘åç»§èŠ‚ç‚¹ï¼ˆnullï¼‰</span>
    <span class="kd">final</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">newNode</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Node</span><span class="o">&lt;&gt;(</span><span class="n">l</span><span class="o">,</span> <span class="n">e</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
    <span class="c1">// ä¿®æ”¹ last æŒ‡é’ˆ</span>
    <span class="n">last</span> <span class="o">=</span> <span class="n">newNode</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">l</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
        <span class="c1">// l ä¸º null è¯´æ˜é¦–ä¸ªæ·»åŠ çš„å…ƒç´ ï¼Œéœ€è¦ä¿®æ”¹ first æŒ‡é’ˆ</span>
        <span class="n">first</span> <span class="o">=</span> <span class="n">newNode</span><span class="o">;</span>
    <span class="k">else</span>
        <span class="c1">// 5. å°†å‰é©±èŠ‚ç‚¹çš„ next æŒ‡é’ˆæŒ‡å‘æ–°èŠ‚ç‚¹</span>
        <span class="n">l</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="n">newNode</span><span class="o">;</span>
    <span class="c1">// 6. å°†åç»§èŠ‚ç‚¹çš„ prev æŒ‡é’ˆæŒ‡å‘æ–°èŠ‚ç‚¹ï¼ˆåç»§èŠ‚ç‚¹æ˜¯ nullï¼Œæ‰€ä»¥æ²¡æœ‰è¿™ä¸ªæ­¥éª¤ï¼‰</span>
    <span class="n">size</span><span class="o">++;</span>
    <span class="n">modCount</span><span class="o">++;</span>
<span class="o">}</span>

<span class="c1">// åœ¨æŒ‡å®šèŠ‚ç‚¹å‰æ·»åŠ </span>
<span class="c1">// 1. æ‰¾åˆ°æ’å…¥ä½ç½®çš„åç»§èŠ‚ç‚¹</span>
<span class="kt">void</span> <span class="nf">linkBefore</span><span class="o">(</span><span class="no">E</span> <span class="n">e</span><span class="o">,</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">succ</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">pred</span> <span class="o">=</span> <span class="n">succ</span><span class="o">.</span><span class="na">prev</span><span class="o">;</span>
    <span class="c1">// 2. æ„é€ æ–°èŠ‚ç‚¹</span>
    <span class="c1">// 3. å°†æ–°èŠ‚ç‚¹çš„ prev æŒ‡é’ˆæŒ‡å‘å‰é©±èŠ‚ç‚¹ï¼ˆpredï¼‰</span>
    <span class="c1">// 4. å°†æ–°èŠ‚ç‚¹çš„ next æŒ‡é’ˆæŒ‡å‘åç»§èŠ‚ç‚¹ï¼ˆsuccï¼‰</span>
    <span class="kd">final</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">newNode</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Node</span><span class="o">&lt;&gt;(</span><span class="n">pred</span><span class="o">,</span> <span class="n">e</span><span class="o">,</span> <span class="n">succ</span><span class="o">);</span>
    <span class="n">succ</span><span class="o">.</span><span class="na">prev</span> <span class="o">=</span> <span class="n">newNode</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">pred</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
        <span class="n">first</span> <span class="o">=</span> <span class="n">newNode</span><span class="o">;</span>
    <span class="k">else</span>
        <span class="c1">// 5. å°†å‰é©±èŠ‚ç‚¹çš„ next æŒ‡é’ˆæŒ‡å‘æ–°èŠ‚ç‚¹</span>
        <span class="n">pred</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="n">newNode</span><span class="o">;</span>
    <span class="n">size</span><span class="o">++;</span>
    <span class="n">modCount</span><span class="o">++;</span>
<span class="o">}</span>

<span class="c1">// åœ¨æŒ‡å®šä½ç½®æ·»åŠ æ•´ä¸ªé›†åˆå…ƒç´ </span>
<span class="c1">// index ä¸º 0ï¼šåœ¨é“¾è¡¨å¤´éƒ¨æ·»åŠ </span>
<span class="c1">// index ä¸º sizeï¼šåœ¨é“¾è¡¨å°¾éƒ¨æ·»åŠ </span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">addAll</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">,</span> <span class="nc">Collection</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="no">E</span><span class="o">&gt;</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">checkPositionIndex</span><span class="o">(</span><span class="n">index</span><span class="o">);</span>
    <span class="c1">// äº‹å®ä¸Šï¼Œc.toArray() çš„å®é™…ç±»å‹ä¸ä¸€å®šæ˜¯ Object[]ï¼Œæœ‰å¯èƒ½æ˜¯ String[] ç­‰</span>
    <span class="c1">// ä¸è¿‡ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡ Nodeä¸­çš„item æ‰¿æ¥çš„ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒ ArrayList ä¸­çš„ ArrayStoreException é—®é¢˜</span>
    <span class="nc">Object</span><span class="o">[]</span> <span class="n">a</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">toArray</span><span class="o">();</span>
    <span class="c1">// æ·»åŠ çš„æ•°ç»„ä¸ºç©ºï¼Œè·³è¿‡</span>
    <span class="kt">int</span> <span class="n">numNew</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">numNew</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span>
        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>

    <span class="c1">// 1. æ‰¾åˆ°æ’å…¥ä½ç½®çš„åç»§èŠ‚ç‚¹</span>
    <span class="c1">// predï¼šæ’å…¥ä½ç½®çš„å‰é©±èŠ‚ç‚¹</span>
    <span class="c1">// succï¼šæ’å…¥ä½ç½®çš„åç»§èŠ‚ç‚¹</span>
    <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">pred</span><span class="o">,</span> <span class="n">succ</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">index</span> <span class="o">==</span> <span class="n">size</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">succ</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="n">pred</span> <span class="o">=</span> <span class="n">last</span><span class="o">;</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="c1">// æ‰¾åˆ° index ä½ç½®åŸæœ¬çš„èŠ‚ç‚¹ï¼Œæ’å…¥åå˜æˆåç»§èŠ‚ç‚¹</span>
        <span class="n">succ</span> <span class="o">=</span> <span class="n">node</span><span class="o">(</span><span class="n">index</span><span class="o">);</span>
        <span class="n">pred</span> <span class="o">=</span> <span class="n">succ</span><span class="o">.</span><span class="na">prev</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="c1">// æ’å…¥é›†åˆå…ƒç´ </span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">Object</span> <span class="n">o</span> <span class="o">:</span> <span class="n">a</span><span class="o">)</span> <span class="o">{</span>
        <span class="no">E</span> <span class="n">e</span> <span class="o">=</span> <span class="o">(</span><span class="no">E</span><span class="o">)</span> <span class="n">o</span><span class="o">;</span>
        <span class="c1">// 2. æ„é€ æ–°èŠ‚ç‚¹</span>
        <span class="c1">// 3. å°†æ–°èŠ‚ç‚¹çš„ prev æŒ‡é’ˆæŒ‡å‘å‰é©±èŠ‚ç‚¹</span>
        <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">newNode</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Node</span><span class="o">&lt;&gt;(</span><span class="n">pred</span><span class="o">,</span> <span class="n">e</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">pred</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
            <span class="c1">// pred ä¸º null è¯´æ˜æ˜¯åœ¨å¤´éƒ¨æ’å…¥ï¼Œéœ€è¦ä¿®æ”¹ first æŒ‡é’ˆ</span>
            <span class="n">first</span> <span class="o">=</span> <span class="n">newNode</span><span class="o">;</span>
        <span class="k">else</span>
            <span class="c1">// 5. å°†å‰é©±èŠ‚ç‚¹çš„ next æŒ‡é’ˆæŒ‡å‘æ–°èŠ‚ç‚¹</span>
            <span class="n">pred</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="n">newNode</span><span class="o">;</span>
        <span class="c1">// ä¿®æ”¹å‰é©±æŒ‡é’ˆ</span>
        <span class="n">pred</span> <span class="o">=</span> <span class="n">newNode</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">succ</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// succ ä¸º null è¯´æ˜æ˜¯åœ¨å°¾éƒ¨æ’å…¥ï¼Œéœ€è¦ä¿®æ”¹ last æŒ‡é’ˆ</span>
        <span class="n">last</span> <span class="o">=</span> <span class="n">pred</span><span class="o">;</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="c1">// 4. å°†æ–°èŠ‚ç‚¹çš„ next æŒ‡é’ˆæŒ‡å‘åç»§èŠ‚ç‚¹</span>
        <span class="n">pred</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="n">succ</span><span class="o">;</span>
        <span class="c1">// 6. å°†åç»§èŠ‚ç‚¹çš„ prev æŒ‡é’ˆæŒ‡å‘æ–°èŠ‚ç‚¹</span>
        <span class="n">succ</span><span class="o">.</span><span class="na">prev</span> <span class="o">=</span> <span class="n">pred</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="c1">// æ•°é‡å¢åŠ  numNew</span>
    <span class="n">size</span> <span class="o">+=</span> <span class="n">numNew</span><span class="o">;</span>
    <span class="n">modCount</span><span class="o">++;</span>
    <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
<span class="o">}</span>

<span class="c1">// å°† LinkedList è½¬åŒ–ä¸º Object æ•°ç»„</span>
<span class="kd">public</span> <span class="nc">Object</span><span class="o">[]</span> <span class="nf">toArray</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">Object</span><span class="o">[]</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Object</span><span class="o">[</span><span class="n">size</span><span class="o">];</span>
    <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">first</span><span class="o">;</span> <span class="n">x</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="na">next</span><span class="o">)</span>
        <span class="n">result</span><span class="o">[</span><span class="n">i</span><span class="o">++]</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="na">item</span><span class="o">;</span>
    <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
<span class="o">}</span>
</pre></table></code></div></div><p>åœ¨é“¾è¡¨ä¸­é—´æ·»åŠ èŠ‚ç‚¹æ—¶ï¼Œä¼šç”¨åˆ° node(index) æ–¹æ³•æŸ¥è¯¢æŒ‡å®šä½ç½®çš„èŠ‚ç‚¹ã€‚å¯ä»¥çœ‹åˆ°ç»´æŒ first å’Œ last å¤´å°¾èŠ‚ç‚¹çš„ä½œç”¨åˆå‘æŒ¥å‡ºæ¥äº†ï¼š</p><ul><li>å¦‚æœç´¢å¼•ä½ç½®å°äº size/2ï¼Œåˆ™ä»å¤´èŠ‚ç‚¹å¼€å§‹æ‰¾ï¼›<li>å¦‚æœç´¢å¼•ä½ç½®å¤§äº size/2ï¼Œåˆ™ä»å°¾èŠ‚ç‚¹å¼€å§‹æ‰¾ã€‚</ul><p>è™½ç„¶ï¼Œæˆ‘ä»¬ä»å¤æ‚åº¦åˆ†æçš„è§’åº¦çœ‹ï¼Œä»å“ªä¸ªæ–¹å‘æŸ¥è¯¢æ˜¯æ²¡æœ‰åŒºåˆ«çš„ï¼Œæ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(n)ã€‚ä½†ä»å·¥ç¨‹åˆ†æçš„è§’åº¦çœ‹è¿˜æ˜¯æœ‰åŒºåˆ«çš„ï¼Œä»æ›´é è¿‘ç›®æ ‡èŠ‚ç‚¹çš„ä½ç½®å¼€å§‹æŸ¥è¯¢ï¼Œå®é™…æ‰§è¡Œçš„æ—¶é—´ä¼šæ›´çŸ­ã€‚</p><p>æŸ¥è¯¢æŒ‡å®šä½ç½®èŠ‚ç‚¹</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="c1">// å¯»æ‰¾æŒ‡å®šä½ç½®çš„èŠ‚ç‚¹ï¼Œæ—¶é—´å¤æ‚åº¦ï¼šO(n)</span>
<span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="nf">node</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">index</span> <span class="o">&lt;</span> <span class="o">(</span><span class="n">size</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="o">))</span> <span class="o">{</span>
        <span class="c1">// å¦‚æœç´¢å¼•ä½ç½®å°äº size/2ï¼Œåˆ™ä»å¤´èŠ‚ç‚¹å¼€å§‹æ‰¾</span>
        <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">first</span><span class="o">;</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">index</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="na">next</span><span class="o">;</span>
        <span class="k">return</span> <span class="n">x</span><span class="o">;</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="c1">// å¦‚æœç´¢å¼•ä½ç½®å¤§äº size/2ï¼Œåˆ™ä»å°¾èŠ‚ç‚¹å¼€å§‹æ‰¾</span>
        <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">last</span><span class="o">;</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">size</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="n">index</span><span class="o">;</span> <span class="n">i</span><span class="o">--)</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="na">prev</span><span class="o">;</span>
        <span class="k">return</span> <span class="n">x</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>LinkedList çš„åˆ é™¤æ–¹æ³•å…¶å®å°±æ˜¯æ·»åŠ æ–¹æ³•çš„é€†è¿ç®—ï¼Œæˆ‘ä»¬å°±ä¸é‡å¤åˆ†æäº†ã€‚</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="c1">// åˆ é™¤å¤´éƒ¨å…ƒç´ </span>
<span class="kd">public</span> <span class="no">E</span> <span class="nf">removeFirst</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">f</span> <span class="o">=</span> <span class="n">first</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">f</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">NoSuchElementException</span><span class="o">();</span>
    <span class="k">return</span> <span class="nf">unlinkFirst</span><span class="o">(</span><span class="n">f</span><span class="o">);</span>
<span class="o">}</span>

<span class="c1">// åˆ é™¤å°¾éƒ¨å…ƒç´ </span>
<span class="kd">public</span> <span class="no">E</span> <span class="nf">removeLast</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">l</span> <span class="o">=</span> <span class="n">last</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">l</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">NoSuchElementException</span><span class="o">();</span>
    <span class="k">return</span> <span class="nf">unlinkLast</span><span class="o">(</span><span class="n">l</span><span class="o">);</span>
<span class="o">}</span>

<span class="c1">// åˆ é™¤æŒ‡å®šå…ƒç´ </span>
<span class="kd">public</span> <span class="no">E</span> <span class="nf">remove</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">checkElementIndex</span><span class="o">(</span><span class="n">index</span><span class="o">);</span>
    <span class="k">return</span> <span class="nf">unlink</span><span class="o">(</span><span class="n">node</span><span class="o">(</span><span class="n">index</span><span class="o">));</span>
<span class="o">}</span>
</pre></table></code></div></div><h3 id="4linkedlist-çš„è¿­ä»£å™¨"><span class="mr-2">4ã€LinkedList çš„è¿­ä»£å™¨</span><a href="#4linkedlist-çš„è¿­ä»£å™¨" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Java çš„ foreach æ˜¯è¯­æ³•ç³–ï¼Œæœ¬è´¨ä¸Šä¹Ÿæ˜¯é‡‡ç”¨ iterator çš„æ–¹å¼ã€‚ç”±äº LinkedList æœ¬èº«å°±æ˜¯åŒå‘çš„ï¼Œæ‰€ä»¥ LinkedList åªæä¾›äº† 1 ä¸ªè¿­ä»£å™¨ï¼š</p><ul><li><strong>ListIterator listIterator()ï¼š</strong> åŒå‘è¿­ä»£å™¨</ul><p>ä¸å…¶ä»–å®¹å™¨ç±»ä¸€æ ·ï¼ŒLinkedList çš„è¿­ä»£å™¨ä¸­éƒ½æœ‰ fail-fast æœºåˆ¶ã€‚å¦‚æœåœ¨è¿­ä»£çš„è¿‡ç¨‹ä¸­å‘ç° expectedModCount å˜åŒ–ï¼Œè¯´æ˜æ•°æ®è¢«ä¿®æ”¹ï¼Œæ­¤æ—¶å°±ä¼šæå‰æŠ›å‡º <code class="language-plaintext highlighter-rouge">ConcurrentModificationException</code> å¼‚å¸¸ï¼ˆå½“ç„¶ä¹Ÿä¸ä¸€å®šæ˜¯è¢«å…¶ä»–çº¿ç¨‹ä¿®æ”¹ï¼‰ã€‚</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="nc">ListIterator</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="nf">listIterator</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">checkPositionIndex</span><span class="o">(</span><span class="n">index</span><span class="o">);</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">ListItr</span><span class="o">(</span><span class="n">index</span><span class="o">);</span>
<span class="o">}</span>

<span class="c1">// éé™æ€å†…éƒ¨ç±»</span>
<span class="kd">private</span> <span class="kd">class</span> <span class="nc">ListItr</span> <span class="kd">implements</span> <span class="nc">ListIterator</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">lastReturned</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">next</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">nextIndex</span><span class="o">;</span>
    <span class="c1">// åˆ›å»ºè¿­ä»£å™¨æ—¶ä¼šè®°å½•å¤–éƒ¨ç±»çš„ modCount</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">expectedModCount</span> <span class="o">=</span> <span class="n">modCount</span><span class="o">;</span>

    <span class="nc">ListItr</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">next</span> <span class="o">=</span> <span class="o">(</span><span class="n">index</span> <span class="o">==</span> <span class="n">size</span><span class="o">)</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="n">node</span><span class="o">(</span><span class="n">index</span><span class="o">);</span>
        <span class="n">nextIndex</span> <span class="o">=</span> <span class="n">index</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="no">E</span> <span class="nf">next</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// æ›´æ–° expectedModCount</span>
        <span class="n">checkForComodification</span><span class="o">();</span>
        <span class="o">...</span>
    <span class="o">}</span>
    <span class="o">...</span>
<span class="o">}</span>	
</pre></table></code></div></div><h3 id="5linkedlist-çš„åºåˆ—åŒ–è¿‡ç¨‹"><span class="mr-2">5ã€LinkedList çš„åºåˆ—åŒ–è¿‡ç¨‹</span><a href="#5linkedlist-çš„åºåˆ—åŒ–è¿‡ç¨‹" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><strong>ğŸ™‹ğŸ»â€â™€ï¸ ç–‘é—® 2ï¼šä¸ºä»€ä¹ˆå­—æ®µéƒ½å£°æ˜ <code class="language-plaintext highlighter-rouge">transient</code> å…³é”®å­—ï¼Ÿ</strong></ul><p>LinkedList é‡å†™äº† JDK åºåˆ—åŒ–çš„é€»è¾‘ï¼Œä¸åºåˆ—åŒ–é“¾è¡¨èŠ‚ç‚¹ï¼Œè€Œåªæ˜¯åºåˆ—åŒ–é“¾è¡¨èŠ‚ç‚¹ä¸­çš„æœ‰æ•ˆæ•°æ®ï¼Œè¿™æ ·åºåˆ—åŒ–äº§ç‰©çš„å¤§å°å°±æœ‰æ‰€é™ä½ã€‚åœ¨ååºåˆ—æ—¶ï¼Œåªéœ€è¦æŒ‰ç…§å¯¹è±¡é¡ºåºä¾æ¬¡æ·»åŠ åˆ°é“¾è¡¨çš„æœ«å°¾ï¼Œå°±èƒ½æ¢å¤é“¾è¡¨çš„é¡ºåºã€‚</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre><td class="rouge-code"><pre><span class="c1">// åºåˆ—åŒ–å’Œååºåˆ—åŒ–åªè€ƒè™‘æœ‰æ•ˆæ•°æ®</span>

<span class="c1">// åºåˆ—åŒ–è¿‡ç¨‹</span>
<span class="kd">private</span> <span class="kt">void</span> <span class="nf">writeObject</span><span class="o">(</span><span class="n">java</span><span class="o">.</span><span class="na">io</span><span class="o">.</span><span class="na">ObjectOutputStream</span> <span class="n">s</span><span class="o">)</span>
    <span class="kd">throws</span> <span class="n">java</span><span class="o">.</span><span class="na">io</span><span class="o">.</span><span class="na">IOException</span> <span class="o">{</span>
    <span class="c1">// Write out any hidden serialization magic</span>
    <span class="n">s</span><span class="o">.</span><span class="na">defaultWriteObject</span><span class="o">();</span>

    <span class="c1">// å†™å…¥é“¾è¡¨é•¿åº¦</span>
    <span class="n">s</span><span class="o">.</span><span class="na">writeInt</span><span class="o">(</span><span class="n">size</span><span class="o">);</span>

    <span class="c1">// å†™å…¥èŠ‚ç‚¹ä¸Šçš„æœ‰æ•ˆæ•°æ®</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">first</span><span class="o">;</span> <span class="n">x</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="na">next</span><span class="o">)</span>
        <span class="n">s</span><span class="o">.</span><span class="na">writeObject</span><span class="o">(</span><span class="n">x</span><span class="o">.</span><span class="na">item</span><span class="o">);</span>
<span class="o">}</span>

<span class="c1">// ååºåˆ—åŒ–è¿‡ç¨‹</span>
<span class="kd">private</span> <span class="kt">void</span> <span class="nf">readObject</span><span class="o">(</span><span class="n">java</span><span class="o">.</span><span class="na">io</span><span class="o">.</span><span class="na">ObjectInputStream</span> <span class="n">s</span><span class="o">)</span>
    <span class="kd">throws</span> <span class="n">java</span><span class="o">.</span><span class="na">io</span><span class="o">.</span><span class="na">IOException</span><span class="o">,</span> <span class="nc">ClassNotFoundException</span> <span class="o">{</span>
    <span class="c1">// Read in any hidden serialization magic</span>
    <span class="n">s</span><span class="o">.</span><span class="na">defaultReadObject</span><span class="o">();</span>

    <span class="c1">// è¯»å–é“¾è¡¨é•¿åº¦</span>
    <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="na">readInt</span><span class="o">();</span>
		
    <span class="c1">// è¯»å–æœ‰æ•ˆå…ƒç´ å¹¶ç”¨ linkLast æ·»åŠ åˆ°é“¾è¡¨å°¾éƒ¨</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">size</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
        <span class="n">linkLast</span><span class="o">((</span><span class="no">E</span><span class="o">)</span><span class="n">s</span><span class="o">.</span><span class="na">readObject</span><span class="o">());</span>
<span class="o">}</span>
</pre></table></code></div></div><h3 id="6linkedlist-çš„-clone-è¿‡ç¨‹"><span class="mr-2">6ã€LinkedList çš„ clone() è¿‡ç¨‹</span><a href="#6linkedlist-çš„-clone-è¿‡ç¨‹" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>LinkedList ä¸­çš„ first å’Œ last æŒ‡é’ˆæ˜¯å¼•ç”¨ç±»å‹ï¼Œå› æ­¤åœ¨ clone() ä¸­éœ€è¦å®ç°æ·±æ‹·è´ã€‚å¦åˆ™ï¼Œå…‹éš†åä¸¤ä¸ª LinkedList å¯¹è±¡ä¼šç›¸äº’å½±å“ï¼š</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre><span class="kd">private</span> <span class="nc">LinkedList</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="nf">superClone</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="k">return</span> <span class="o">(</span><span class="nc">LinkedList</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;)</span> <span class="kd">super</span><span class="o">.</span><span class="na">clone</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">CloneNotSupportedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">InternalError</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="nc">Object</span> <span class="nf">clone</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">LinkedList</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">clone</span> <span class="o">=</span> <span class="n">superClone</span><span class="o">();</span>

    <span class="c1">// Put clone into "virgin" state</span>
    <span class="n">clone</span><span class="o">.</span><span class="na">first</span> <span class="o">=</span> <span class="n">clone</span><span class="o">.</span><span class="na">last</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="n">clone</span><span class="o">.</span><span class="na">size</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="n">clone</span><span class="o">.</span><span class="na">modCount</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

    <span class="c1">// å°†åŸé“¾è¡¨ä¸­çš„æ•°æ®ä¾æ¬¡æ·»åŠ åˆ°æ–°ç«‹æ¡ˆè¡¨ä¸­</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">first</span><span class="o">;</span> <span class="n">x</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="na">next</span><span class="o">)</span>
        <span class="n">clone</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">x</span><span class="o">.</span><span class="na">item</span><span class="o">);</span>

    <span class="k">return</span> <span class="n">clone</span><span class="o">;</span>
<span class="o">}</span>
</pre></table></code></div></div><h3 id="7linkedlist-å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨"><span class="mr-2">7ã€LinkedList å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨ï¼Ÿ</span><a href="#7linkedlist-å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>æœ‰ 5 ç§æ–¹å¼ï¼š</p><ul><li><strong>æ–¹æ³• 1 - ä½¿ç”¨ Collections.synchronizedList åŒ…è£…ç±»ï¼š</strong> åŸç†ä¹Ÿæ˜¯åœ¨æ‰€æœ‰æ–¹æ³•ä¸Šå¢åŠ  synchronized å…³é”®å­—ï¼›<li><strong>æ–¹æ³• 2 - ä½¿ç”¨ ConcurrentLinkedQueue å®¹å™¨ç±»ï¼š</strong> åŸºäº CAS æ— é”å®ç°çš„çº¿ç¨‹å®‰å…¨é˜Ÿåˆ—ï¼›<li><strong>æ–¹æ³• 3 - ä½¿ç”¨ LinkedBlockingQueue å®¹å™¨ï¼š</strong> åŸºäºåŠ é”çš„é˜»å¡é˜Ÿåˆ—ï¼Œé€‚åˆäºå¸¦é˜»å¡æ“ä½œçš„ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹ï¼›<li><strong>æ–¹æ³• 4 - ä½¿ç”¨ LinkedBlockingDeque å®¹å™¨ï¼š</strong> åŸºäºåŠ é”çš„é˜»å¡åŒç«¯é˜Ÿåˆ—ï¼Œé€‚åˆäºå¸¦é˜»å¡æ“ä½œçš„ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹ï¼›<li><strong>æ–¹æ³• 5 - ä½¿ç”¨ ConcurrentLinkedDeque å®¹å™¨ç±»ï¼š</strong> åŸºäº CAS æ— é”å®ç°çš„çº¿ç¨‹å®‰å…¨åŒç«¯é˜Ÿåˆ—ã€‚</ul><h2 id="ä¸‰æ€»ç»“"><span class="mr-2">ä¸‰ã€æ€»ç»“</span><a href="#ä¸‰æ€»ç»“" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>1ã€LinkedList æ˜¯åŸºäºé“¾è¡¨çš„çº¿æ€§è¡¨ï¼ŒåŒæ—¶å…·å¤‡ Listã€Queue å’Œ Stack çš„è¡Œä¸ºï¼›</p><p>2ã€åœ¨æŸ¥è¯¢æŒ‡å®šä½ç½®çš„èŠ‚ç‚¹æ—¶ï¼Œå¦‚æœç´¢å¼•ä½ç½®å°äº size/2ï¼Œåˆ™ä»å¤´èŠ‚ç‚¹å¼€å§‹æ‰¾ï¼Œå¦åˆ™ä»å°¾èŠ‚ç‚¹å¼€å§‹æ‰¾ï¼›</p><p>3ã€LinkedList é‡å†™äº†åºåˆ—åŒ–è¿‡ç¨‹ï¼Œåªå¤„ç†é“¾è¡¨èŠ‚ç‚¹ä¸­æœ‰æ•ˆçš„å…ƒç´ ï¼›</p><p>4ã€LinkedList å’Œ ArrayList éƒ½ä¸è€ƒè™‘çº¿ç¨‹åŒæ­¥ï¼Œä¸ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/'>æ•°æ®ç»“æ„</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/%E5%AD%A6%E4%B9%A0/" class="post-tag no-text-decoration" >å­¦ä¹ </a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> æœ¬æ–‡ç”±ä½œè€…æŒ‰ç…§ <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> è¿›è¡Œæˆæƒ</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">åˆ†äº«</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=ArrayList%20%E5%92%8C%20LinkedList%20%E7%9A%84%E5%8C%BA%E5%88%AB%20-%20YKFire&url=%2Fposts%2FLinkedList%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=ArrayList%20%E5%92%8C%20LinkedList%20%E7%9A%84%E5%8C%BA%E5%88%AB%20-%20YKFire&u=%2Fposts%2FLinkedList%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=%2Fposts%2FLinkedList%2F&text=ArrayList%20%E5%92%8C%20LinkedList%20%E7%9A%84%E5%8C%BA%E5%88%AB%20-%20YKFire" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="åˆ†äº«é“¾æ¥" data-title-succeed="é“¾æ¥å·²å¤åˆ¶ï¼"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">æœ€è¿‘æ›´æ–°</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/ApplyProtocol2/">è®¡ç®—æœºç½‘ç»œåº”ç”¨å±‚åè®®(äºŒ)</a><li><a href="/posts/ApplyProtocol/">è®¡ç®—æœºç½‘ç»œåº”ç”¨å±‚åè®®(ä¸€)</a><li><a href="/posts/NetworkOne/">è®¡ç®—æœºç½‘ç»œå‘å±•å²(ä¸€)</a><li><a href="/posts/NetworkTwo/">è®¡ç®—æœºç½‘ç»œå‘å±•å²(äºŒ)</a><li><a href="/posts/NetworkThree/">è®¡ç®—æœºç½‘ç»œå‘å±•å²(ä¸‰)</a></ul></div><div id="access-tags"><div class="panel-heading">çƒ­é—¨æ ‡ç­¾</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/%E5%AD%A6%E4%B9%A0/">å­¦ä¹ </a> <a class="post-tag" href="/tags/%E8%81%8C%E4%B8%9A%E8%A7%84%E5%88%92/">èŒä¸šè§„åˆ’</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">æ–‡ç« å†…å®¹</div><nav id="toc"></nav></div><script src="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.js"></script></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>ç›¸å…³æ–‡ç« </h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/NetWorkProtocol5/"><div class="card-body"> <em class="small" data-ts="1700394840" data-df="YYYY/MM/DD" > 2023/11/19 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>è®¡ç®—æœºç½‘ç»œä¼ è¾“å±‚åè®®(äº”)</h3><div class="text-muted small"><p> ä¼ è¾“å±‚åè®® è¿™æ˜¯è®¡ç®—æœºç½‘ç»œä¼ è¾“å±‚çš„ç¬¬äº”ç¯‡æ–‡ç« ã€‚ TCP æ•°æ®æµå’Œçª—å£ç®¡ç† æˆ‘ä»¬åœ¨ä¹‹å‰çš„è®²è¿°ä¸­çŸ¥é“äº†å¯ä»¥ä½¿ç”¨æ»‘åŠ¨çª—å£æ¥å®ç°æµé‡æ§åˆ¶ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å¯ä»¥ç›¸äº’æä¾›æ•°æ®æµä¿¡æ¯çš„äº¤æ¢ï¼Œæ•°æ®æµçš„ç›¸å…³ä¿¡æ¯ä¸»è¦åŒ…æ‹¬æŠ¥æ–‡æ®µåºåˆ—å·ã€ACK å·å’Œçª—å£å¤§å°ã€‚ å›¾ä¸­çš„ä¸¤ä¸ªç®­å¤´è¡¨ç¤ºæ•°æ®æµæ–¹å‘ï¼Œæ•°æ®æµæ–¹å‘ä¹Ÿå°±æ˜¯ TCP æŠ¥æ–‡æ®µçš„ä¼ è¾“æ–¹å‘ã€‚å¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸ª TCP æŠ¥æ–‡æ®µä¸­éƒ½åŒ…æ‹¬äº†åºåˆ—å·ã€ACK å’Œ...</p></div></div></a></div><div class="card"> <a href="/posts/surroundedByAlgorithms/"><div class="card-body"> <em class="small" data-ts="1700983740" data-df="YYYY/MM/DD" > 2023/11/26 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>å®Œè›‹ï¼æˆ‘è¢«ç®—æ³•åŒ…å›´äº†</h3><div class="text-muted small"><p> ç®—æ³•åœ¨æ—¥å¸¸ç”Ÿæ´»çš„åº”ç”¨ ç®—æ³•å¬ä¸Šå»å¾ˆå¤æ‚ï¼Œç¦»æˆ‘ä»¬å¾ˆé¥è¿œã€‚ä½†æ˜¯ä»¥ä¸‹ 10 ç§ç®—æ³•å¹¿æ³›ç”¨äºæˆ‘ä»¬çš„æ—¥å¸¸ç”Ÿæ´»ï¼ŒåŒ…æ‹¬äº’è”ç½‘æœç´¢å¼•æ“ã€ç¤¾äº¤ç½‘ç»œã€WiFiã€æ‰‹æœºç”šè‡³å«æ˜Ÿã€‚ ä»¥ä¸‹æ˜¯ä¸»å®°æˆ‘ä»¬ä¸–ç•Œçš„åç§ç®—æ³•ï¼š 01 æ’åº æˆ‘ä»¬å­¦ä¹ ç®—æ³•ä¸€èˆ¬éƒ½æ˜¯ä»æ’åºç®—æ³•å¼€å§‹çš„ï¼Œæ¯”å¦‚å†’æ³¡æ’åºã€å¿«æ’åºã€å½’å¹¶æ’åºã€å †æ’åºç­‰ã€‚ ç¬”è€…æ›¾ç»åšè¿‡çš„ä¸€ä¸ªå¤§æ‰¹é‡å¯¹è´¦ç³»ç»Ÿï¼Œå°±æ˜¯åœ¨ç¬¬ä¸€æ­¥ä½¿ç”¨å½’å¹¶å¤–æ’åºï¼ˆExternal MergeSort...</p></div></div></a></div><div class="card"> <a href="/posts/MyFirstBlog/"><div class="card-body"> <em class="small" data-ts="1662124620" data-df="YYYY/MM/DD" > 2022/09/02 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢ï¼</h3><div class="text-muted small"><p> æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢ï¼ è¿™é‡Œå¯ä»¥æ”¾ä»£ç ç‰‡æ®µå™¢ï½ //ä»£ç ç‰‡æ®µ int main(){ hello world; }</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/AllMySQL/" class="btn btn-outline-primary" prompt="ä¸Šä¸€ç¯‡"><p>å…¨æ–¹é¢äº†è§£MySQL</p></a> <a href="/posts/ArrayList/" class="btn btn-outline-primary" prompt="ä¸‹ä¸€ç¯‡"><p>ArrayList å¯ä»¥å®Œå…¨æ›¿ä»£æ•°ç»„å—ï¼Ÿ</p></a></div></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">çƒ­é—¨æ ‡ç­¾</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/%E5%AD%A6%E4%B9%A0/">å­¦ä¹ </a> <a class="post-tag" href="/tags/%E8%81%8C%E4%B8%9A%E8%A7%84%E5%88%92/">èŒä¸šè§„åˆ’</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> Â© 2024 <a href="https://twitter.com/username">YKFire</a>. <span data-toggle="tooltip" data-placement="top" title="é™¤éå¦æœ‰è¯´æ˜ï¼Œæœ¬ç½‘ç«™ä¸Šçš„åšå®¢æ–‡ç« å‡ç”±ä½œè€…æŒ‰ç…§çŸ¥è¯†å…±äº«ç½²å 4.0 å›½é™… (CC BY 4.0) è®¸å¯åè®®è¿›è¡Œæˆæƒã€‚">ä¿ç•™éƒ¨åˆ†æƒåˆ©ã€‚</span></p></div><div class="footer-right"><p class="mb-0">æœ¬ç«™ç”± <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> ç”Ÿæˆï¼Œé‡‡ç”¨ <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> ä¸»é¢˜ã€‚</p></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> (function () { function updateMermaid(event) { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { const mode = event.data.message; if (typeof mermaid === "undefined") { return; } let expectedTheme = (mode === ModeToggle.DARK_MODE ? "dark" : "default"); let config = {theme: expectedTheme}; /* Re-render the SVG â€º <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function () { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } let initTheme = "default"; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Create mermaid tag */ $("pre").has("code.language-mermaid").each(function () { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<pre class=\"mermaid\">${svgCode}</pre>`); }); mermaid.initialize(mermaidConf); window.addEventListener("message", updateMermaid); })(); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">æœç´¢ç»“æœä¸ºç©º</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/zh.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script>
