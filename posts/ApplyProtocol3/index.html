<!DOCTYPE html><html lang="zh-CN" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.3" /><meta property="og:title" content="计算机网络应用层协议(三)" /><meta name="author" content="YKFire" /><meta property="og:locale" content="zh_CN" /><meta name="description" content="应用层协议" /><meta property="og:description" content="应用层协议" /><link rel="canonical" href="/posts/ApplyProtocol3/" /><meta property="og:url" content="/posts/ApplyProtocol3/" /><meta property="og:site_name" content="YKFire" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-10-08T13:56:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="计算机网络应用层协议(三)" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@YKFire" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"YKFire"},"dateModified":"2023-10-08T13:56:00+00:00","datePublished":"2023-10-08T13:56:00+00:00","description":"应用层协议","headline":"计算机网络应用层协议(三)","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/ApplyProtocol3/"},"url":"/posts/ApplyProtocol3/"}</script><title>计算机网络应用层协议(三) | YKFire</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="YKFire"><meta name="application-name" content="YKFire"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/config/z1.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">YKFire</a></div><div class="site-subtitle font-italic">怕什么真理无穷，进一寸，有一寸的欢喜.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>首页</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>分类</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>标签</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>归档</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>关于</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/YKFire" aria-label="github" target="_blank" rel="noopener noreferrer"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener noreferrer"> <i class="fab fa-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['1183491613','qq.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> 首页 </a> </span> <span>计算机网络应用层协议(三)</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> 文章</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="搜索..."> </span> <span id="search-cancel" >取消</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>计算机网络应用层协议(三)</h1><div class="post-meta text-muted"> <span> 发表于 <em class="" data-ts="1696773360" data-df="YYYY/MM/DD" data-toggle="tooltip" data-placement="bottom"> 2023/10/08 </em> </span><div class="d-flex justify-content-between"> <span> 作者 <em> <a href=""></a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="5824 字"> <em>32 分钟</em>阅读</span></div></div></div><div class="post-content"><h2 id="应用层协议"><span class="mr-2"><strong>应用层协议</strong></span><a href="#应用层协议" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="web-缓存"><span class="mr-2"><strong>Web 缓存</strong></span><a href="#web-缓存" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>Web 缓存 (Web cache)</strong> 也叫做代理服务器缓存，它是代表 HTTP 服务器来满足用户需求的网络实体。Web 缓存器有自己的磁盘存储空间，并会在存储空间内保存最近请求过的对象，如下图所示</p><p><a href="/assets/blog_res/2023-10-08-ApplyProtocol3.assets/image-20231028215843596.png" class="popup img-link "><img data-src="/assets/blog_res/2023-10-08-ApplyProtocol3.assets/image-20231028215843596.png" alt="image-20231028215843596" class="lazyload" data-proofer-ignore></a></p><p>Web 缓存可以在用户的浏览器中进行配置，一旦配置后，用户首先访问的就不是初始服务器了，需要先访问代理服务器判断请求的对象是否存在，如果代理服务器没有，再由代理服务器来请求初始服务器把对象返回给客户，同时在自己的磁盘空间保存对象。</p><p>这里需要注意，客户和初始服务器的架构是客户-服务器模式，而代理服务器不仅能当服务器使用，也可以当作客户端使用。</p><p>代理服务器一般由ISP (Internet Service Provider)，提供。ISP 也就是我们常说的运营商。</p><p>那么为什么需要代理服务器的存在呢？相信你看完上面的描述应该能大致猜到它的作用。</p><ol><li>首先代理服务器可以大大减少对客户请求的响应时间，能够更快给用户响应。<li>其次代理服务器可以减少一个机构接入链路到网络的通信量，降低网络带宽，降低运营商成本。<li>然后代理服务器可以分担初始服务器的压力，改善应用程序的性能。</ol><h3 id="dash"><span class="mr-2"><strong>DASH</strong></span><a href="#dash" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>现在我们知道了 HTTP 是可以传输普通文件、音频、视频的，这些传输的信息统称为 MIME 类型。HTTP 在传输视频的过程中，也会把视频当做一个对象，而一个对象其实就是一个文件，一个文件都在 HTTP 中都可以用 URL 来表示。当用户在看视频时，客户与服务器建立一个 TCP 连接并发送对该 URL 的 GET 请求，然后服务器响应给客户端时，客户端会缓存一定量的字节数据，当数据超过预先设定的门限时，客户应用程序就开始播放视频。</p><p>这种方式有一种局限性就是对每个客户端来说，尽管每个客户端可用的带宽量不同，但所有客户端都收到相同的视频编码。这就造成带宽浪费。这就相当我是一个 2M 的网络和 50M 的光纤都能收到相同的视频编码，以几乎相同的等待时间开始播放视频，那么我为什么还要花 50 兆光纤的钱呢？</p><p>为了改善这一现象，出现了 HTTP 的 DASH 动态适应流。它的理念是针对不同流量的网络来说，所能够传输的比特数据也不相同。DASH 允许客户使用不同的因特网传输速率可以播放不同编码速率的视频。对于 3G 用户和光纤用户自然会选择以不同的速率传输比特数据，从而最大限度的使用带宽。</p><h3 id="cdn"><span class="mr-2"><strong>CDN</strong></span><a href="#cdn" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>随着互联网的接入用户变得越来越多，视频逐渐成为了比特传输的瓶颈和用户的强烈需求。作为一个因特网视频公司，最一开始提供流式服务最直接的方式是建立单一的大规模数据中心。在数据中心内缓存所有视频，并直接从数据中心向世界范围内传播视频。但是这种方式存在三种问题</p><ol><li>如果客户远离数据中心，那么服务器到客户分组会跨越许多通信链路并且可能通过许多 ISP，这样你的视频播放能快到哪去？<li>每次视频数据都会重新传递给客户端，这样会严重浪费网络带宽，而且视频公司会支付重复的带宽费用<li>单点故障问题，只要视频数据中心宕机或者其他事故，直接导致全球范围内的视频无法播放。</ol><p>为了应对能够向全世界的用户 24 小时不间断的分发视频，几乎所有的主流视频公司都会使用内容分发网。CDN 管理分布在多个地理位置上的服务器，在每个服务器上缓存各种视频、音频、文件等。</p><h4 id="cdn-内容选择策略"><span class="mr-2"><strong>CDN 内容选择策略</strong></span><a href="#cdn-内容选择策略" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>CDN 管理分布在多个地理位置上的服务器，在它的服务器上存储视频副本，并且所有试图将每个用户请求定向到一个提供最好用户体验的 CDN 位置。那么服务器如何选址呢？事实上有两种服务器安置原则：</p><ol><li>深入：它的主要目标是靠近用户，通过减少端用户和 CDN 集群之间链路和路由器的数量，从而改善了用户感受的时延和吞吐量。<li>邀请做客：这个原则是通过在少量（例如 10 个）关键位置建造大集群来邀请 ISP 来做客，与深入设计原则相比，邀请做客设计通常产生较低的维护和管理开销。</ol><h4 id="cdn-工作流程"><span class="mr-2"><strong>CDN 工作流程</strong></span><a href="#cdn-工作流程" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>CDN 可以是专用 CDN，即它由内容提供商自己所拥有；另一种 CDN 是 第三方 CDN，它代表多个内容提供商分发内容。下面我们来聊一下 CDN 工作流程，如下图所示：</p><p><a href="/assets/blog_res/2023-10-08-ApplyProtocol3.assets/image-20231028220345053.png" class="popup img-link "><img data-src="/assets/blog_res/2023-10-08-ApplyProtocol3.assets/image-20231028220345053.png" alt="image-20231028220345053" class="lazyload" data-proofer-ignore></a></p><ol><li><p>用户想要访问指定网站的内容。</p><li><p>用户首先发起对本地 DNS，LDNS 的查询，LDNS 会将请求中继到网站 DNS 服务器，网站的 DNS 服务器会返回给 LDNS 一个网站 CDN 权威服务器的地址。</p><li><p>LDNS 服务器会发送第二个请求给网站 CDN 权威服务器，希望获取网站内容分发服务器的地址，网站 CDN 会把 CDN 内容分发服务器的地址发送给本地 DNS 服务器。</p><li><p>本地 DNS 服务器会把网站 CDN 内容分发服务器的地址发送给用户。</p><li><p>用户知道网站 CDN 内容分发服务器的地址后，无需额外操作，直接和网站 CDN 内容分发服务器建立 TCP 连接，并且发出 HTTP GET 请求，如果使用了 DASH 流，会根据不同 URL 的版本选择不同速率的块发送给用户。</p></ol><h4 id="cdn-集群选择策略"><span class="mr-2"><strong>CDN 集群选择策略</strong></span><a href="#cdn-集群选择策略" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>任何 CDN 的部署，其核心是<strong>集群选择策略 (cluster selection strategy)</strong>，即动态的将客户定向到 CDN 中某个服务器集群或数据中心的机制。一种简单的策略是指派客户到<strong>地理上最为临近 (geographically closest)</strong>的集群。这种选择策略忽略了时延和可用带宽随因特网路径时间而变化，总是为特定的客户指派相同的集群；还有一种选择策略是<strong>实时测量 (real-time measurement)</strong>。该机制是基于集群和客户之间的时延和丢包性能执行周期性检查。</p><h3 id="dns-域名解析协议"><span class="mr-2"><strong>DNS 域名解析协议</strong></span><a href="#dns-域名解析协议" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>试想一个问题，我们人类可以有多少种识别自己的方式？可以通过身份证来识别，可以通过社保卡号来识别，也可以通过驾驶证来识别，尽管我们有多种识别方式，但在特定的环境下，某种识别方法可能比另一种方法更为适合。因特网上的主机和人类一样，可以使用多种识别方式进行标识。互联网上主机的一种标识方法是使用它的主机名，如 <a href="http://www.facebook.com/">www.facebook.com</a>、 <a href="http://www.google.com/">www.google.com</a> 等。但是这是我们人类的记忆方式，路由器不会这么理解，路由器喜欢定长的、有层次结构的 IP 地址，还记得什么是 IP 地址吗？</p><p>IP 地址现在简单表述一下，就是一个由 4 字节组成，并有着严格的层次结构。例如 121.7.106.83 这样一个 IP 地址，其中的每个字节都可以用 . 进行分割，表示了 0 - 255 的十进制数字。</p><p>然而，路由器喜欢的是 IP 地址进行解析，我们人类却便于记忆的是网址，那么路由器如何把 IP 地址解析为我们熟悉的网址地址呢？这时候就需要 DNS 出现了。</p><p><a href="/assets/blog_res/2023-10-08-ApplyProtocol3.assets/image-20231028220647707.png" class="popup img-link "><img data-src="/assets/blog_res/2023-10-08-ApplyProtocol3.assets/image-20231028220647707.png" alt="image-20231028220647707" class="lazyload" data-proofer-ignore></a></p><p>DNS 是一个由分层的 DNS 服务器 (DNS server) 实现的分布式数据库；它还是一个使得主机能够查询分布式数据库的应用层协议。DNS 服务器通常是运行 BIND (Berkeley Internet Name Domain) 软件的 UNIX 机器。DNS 协议运行在 UDP 上，使用 53 端口。</p><h3 id="p2p-文件分发"><span class="mr-2"><strong>P2P 文件分发</strong></span><a href="#p2p-文件分发" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>我们上面探讨的协议 HTTP、SMTP、DNS 都采用了客户-服务器模式，这种模式会极大依赖总是打开的基础设施服务器。而 P2P 是客户端与客户端模式，对总是打开的基础设施服务器有最小的依赖。</p><p>P2P 的全称是 <em>Peer-to-peer, P2P</em>，是一种分布式体系结构的计算机网络。在 P2P 体系中，所有的计算机和设备都被称为对等体，他们互相交换工作。对等网络中的每个对等方都等于其他对等方。网络中没有特权对等体，也没有主管理员设备。</p><p><a href="/assets/blog_res/2023-10-08-ApplyProtocol3.assets/image-20231028220718810.png" class="popup img-link "><img data-src="/assets/blog_res/2023-10-08-ApplyProtocol3.assets/image-20231028220718810.png" alt="image-20231028220718810" class="lazyload" data-proofer-ignore></a></p><p>从某种意义上说，对等网络是计算机世界中最平等的网络。每个对等方都相等，并且每个对等方具有与其他对等方相同的权利和义务。对等体同时是客户端和服务器。</p><p>实际上，对等网络中可用的每个资源都是在对等之间共享的，而无需任何中央服务器。P2P 网络中的共享资源可以是诸如处理器使用率，磁盘存储容量或网络带宽等。</p><h4 id="p2p-用来做什么"><span class="mr-2"><strong>P2P 用来做什么</strong></span><a href="#p2p-用来做什么" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>P2P 的主要目标是共享资源并帮助计算机和设备协同工作，提供特定服务或执行特定任务。如前面说到的，P2P 用于共享各种计算资源，例如网络带宽或磁盘存储空间。 但是，对等网络最常见的例子是 Internet 上的文件共享。 对等网络非常适合文件共享，因为它们允许连接到它们计算机等同时接收文件和发送文件。BitTorrent 是 P2P 使用的主要协议。</p><h4 id="p2p-网络的作用"><span class="mr-2"><strong>P2P 网络的作用</strong></span><a href="#p2p-网络的作用" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>P2P 网络具有一些使它们有用的特征：</p><ol><li>很难完全掉线，即使其中的一个对等方掉线，其他对等方仍在运行并进行通信。 为了使 P2P（对等）网络停止工作，你必须关闭所有对等网络。对等网络具有很强的可扩展性。 添加新的对等节点很容易，因为你无需在中央服务器上进行任何中央配置。<li>当涉及到文件共享时，对等网络越大，速度越快。 在 P2P 网络中的许多对等点上存储相同的文件意味着当某人需要下载文件时，该文件会同时从多个位置下载。</ol><h3 id="telnet"><span class="mr-2"><strong>TELNET</strong></span><a href="#telnet" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>TELNET 又称为远程登录，是一种应用层协议，它为用户提供了在本地机器上就能够操控远程主机工作的能力。例如下面这幅图所示。</p><p><a href="/assets/blog_res/2023-10-08-ApplyProtocol3.assets/image-20231028220936001.png" class="popup img-link "><img data-src="/assets/blog_res/2023-10-08-ApplyProtocol3.assets/image-20231028220936001.png" alt="image-20231028220936001" class="lazyload" data-proofer-ignore></a></p><p>主机 A 可以直接通过 TELNET 协议访问主机 B。</p><p>TELNET 利用 TCP 的一条连接，通过一条连接向主机发送文字命令并在主机上执行。</p><p>使用 TELNET 协议进行远程登录时需要满足一下几个条件：</p><ol><li>必须知道远程主机的 IP 地址或者域名。<li>必须知道登录标识和口令。</ol><p>TELNET 远程登录一般使用 23 端口。</p><p>TELNET 的工作过程如下：</p><ol><li>本地主机与远程主机建立连接，这个连接其实是 TCP 连接，用户需要知道指定主机的 IP 地址或者域名<li>与远程主机建立连接后，在本地主机终端上输入的字符都会以 NVT (Net Virtual Terminal) 的形式发送至远程主机，这个过程实际上是发送一个数据包到远程主机。<li>远程主机接受数据包后，产生的输出会以 NVT 的格式发送给本地主机一个数据包，包括输入命令回显和命令执行结果<li>最后，本地主机终端对远程主机撤销链接，这个过程实际上就是 TCP 断开连接的过程。</ol><h4 id="ssh"><span class="mr-2"><strong>SSH</strong></span><a href="#ssh" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>TELNET 有一个非常明显的缺点，那就是在主机和远程主机的发送数据包的过程中是明文传输，未经任何安全加密，这样的后果是容易被互联网上不法分子嗅探到数据包来搞一些坏事，为了数据的安全性，我们一般使用 SSH 进行远程登录。</p><p>SSH 是加密的远程登录系统。使用 SSH 可以加密通信内容，即时数据包被嗅探和抓取也无法破解所包含的信息，除此之外，SSH 还有一些其他功能：</p><ol><li>SSH 可以使用更强的认证机制。<li>SSH 可以转发文件。<li>SSH 可以使用端口转发功能。</ol><p>端口转发是 SSH 为网络安全通信使用的一种方法。SSH 可以利用端口转发技术来传输其他 TCP/IP 协议的报文，当使用这种方式时，SSH 就为其他服务在客户端和服务器端建立了一条安全的传输管道端口转发是指将特定端口号所收到的消息转发到指定 IP 地址和端口号的一种机制。</p><h3 id="ftp"><span class="mr-2"><strong>FTP</strong></span><a href="#ftp" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>FTP (File Transfer Protocol，文件传输协议)是应用层协议之一，它是计算机网络上用处最广的文件传输协议。</p><p>FTP 协议包括两个组成部分，分为 FTP 服务器和 FTP 客户端。其中 FTP 服务器用来存储文件，用户可以使用 FTP 客户端通过 FTP 协议访问位于 FTP 服务器上的资源。</p><p>由于 FTP 传输效率非常高，一般用来在网络上传输大的文件。</p><p><a href="/assets/blog_res/2023-10-08-ApplyProtocol3.assets/image-20231028221119603.png" class="popup img-link "><img data-src="/assets/blog_res/2023-10-08-ApplyProtocol3.assets/image-20231028221119603.png" alt="image-20231028221119603" class="lazyload" data-proofer-ignore></a></p><p>默认情况下 FTP 协议使用 TCP 端口中的 20 和 21 这两个端口，其中 20 用于传输数据，21 用于传输控制信息。FTP TCP 21 号端口上进行文件传输时，每次都会建立一个用于数据传输的 TCP 连接，数据传输完毕后，传输数据的这条连接也会被断开，在控制用的连接上继续进行命令或应答的处理。</p><p><a href="/assets/blog_res/2023-10-08-ApplyProtocol3.assets/image-20231028221138573.png" class="popup img-link "><img data-src="/assets/blog_res/2023-10-08-ApplyProtocol3.assets/image-20231028221138573.png" alt="image-20231028221138573" class="lazyload" data-proofer-ignore></a></p><h4 id="简单文件传输协议-tftp"><span class="mr-2"><strong>简单文件传输协议 TFTP</strong></span><a href="#简单文件传输协议-tftp" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>TCP/IP 协议簇中还有一个简单文件传输协议(TFTP,Trivial File Transfer Protocol)，它是一个很小且易于实现的文件传输协议。TFTP 也使用的是客户 - 服务器方式，只不过 TFTP 是基于 UDP 来传输报文的。由于 UDP 没有差错检测这一系列对报文完整性的要求，所以 TFTP 需要自己实现差错检测以及错误修改的动作，TFTP 的端口号默认为 69。</p><p>由于 TFTP 使用 UDP 来传输，所以当需要很多客户端下载文件时往往考虑这种方式；而且 TFTP 代码所占内存空间小，这对某些小型机或一些特殊设备比较重要，特殊设备比如某种小容量的只读存储器。当设备通电时，会执行只读存储器中的代码，然后在网络上广播一个 TFTP 请求，网络上的 TFTP 服务器会发送响应，响应中包括可执行的二进制程序，设备收到后会把程序放入内存中并开始执行。</p><p>TFTP 的主要特点是：</p><ol><li>每次会传输 512 字节的数据，最后不足 512 字节的可作为结束标志位<li>报文按序号排序，从 1 开始<li>支持 ASCII 和二进制传输<li>可对文件进行读写</ol><p>TFTP 工作时，每当发送完数据块时对等待对方确认，确认时应该指明所确认的块编号。如果规定时间内没有收到确认就会重发数据 PDU。</p><p>TFTP 的主要特点是：</p><ol><li>每次会传输 512 字节的数据，最后不足 512 字节的可作为结束标志位<li>报文按序号排序，从 1 开始<li>支持 ASCII 和二进制传输<li>可对文件进行读写</ol><p>TFTP 工作时，每当发送完数据块时对等待对方确认，确认时应该指明所确认的块编号。如果规定时间内没有收到确认就会重发数据 PDU。</p><h3 id="dhcp"><span class="mr-2"><strong>DHCP</strong></span><a href="#dhcp" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>DHCP 协议的全称是 <em>Dynamic Host Configuration Protocol</em>，动态主机配置协议。简单来讲一句就是：<strong>这个协议能够让我们自动配置 IP 连接网络</strong>。</p><p>我们知道，在互联网中 IP 地址是标识网络上主机的一种方式，这个 IP 地址的配置方法有两种：一种是通过手动来设置 IP 地址，设置完成后不管你走到哪里这个 IP 地址不会改变，这会导致一个问题：你可能离开某个区域内就会导致无法连接网络；还有一种方式是自动配置 IP 地址，这样不管你走到哪里，你的网卡都会帮你连接上网。</p><p>DHCP 的前身是 BOOTP 协议，BOOTP 协议是一种引导协议，需要人工手动干预进行协议配置，非常不方便。于是 BOOTP 被淘汰了出现了 DHCP，根据上面的描述我们可以得出一个结论：DHCP 是一种<strong>即插即用</strong>式的协议。即插即用的意思就是插上就能用，不需要再手动设置 IP ，这一系列过程都由操作系统和网卡直接分配并设置好。如果你仔细观察过 IP 地址就会发现，当你在不同的地点时，你的 IP 地址会不断变化。</p><p>这一切的背后我会在后面详细聊 DHCP 的时候做全面的阐述。</p><h3 id="smtp"><span class="mr-2"><strong>SMTP</strong></span><a href="#smtp" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>提供电子邮件服务的协议叫做SMTP (Simple Mail Transfer Protocol)，SMTP 在传输层也是用了 TCP 协议。</p><p>早期电子邮件是在发送端主机和接收端主机之间直接建立 TCP 连接。发送方编写好邮件之后会将邮件保存在磁盘中，然后与接受主机建立 TCP 连接，将邮件发送到接受主机的磁盘中。当发送方把邮件发送后，再从本地磁盘中删除邮件。如果接受主机因为特殊情况无法接收，发送端将等待一段时间后重新发送。</p><p>这种方法虽然能够保证电子邮件的完整性和有效性，但却不适合当今的互联网，因为早期的电子邮件只能在线发送，这种方式显然不够成熟。</p><p><a href="/assets/blog_res/2023-10-08-ApplyProtocol3.assets/image-20231028221506271.png" class="popup img-link "><img data-src="/assets/blog_res/2023-10-08-ApplyProtocol3.assets/image-20231028221506271.png" alt="image-20231028221506271" class="lazyload" data-proofer-ignore></a></p><p><a href="/assets/blog_res/2023-10-08-ApplyProtocol3.assets/image-20231028221512675.png" class="popup img-link "><img data-src="/assets/blog_res/2023-10-08-ApplyProtocol3.assets/image-20231028221512675.png" alt="image-20231028221512675" class="lazyload" data-proofer-ignore></a></p><p>针对于此，提出了邮件服务器的概念。邮件服务器构成了整个邮件系统的核心。每个接收方在其中的邮件服务器上会有一个邮箱 (mailbox)存在。用户的邮箱管理和维护发送给他的报文。</p><p>一个典型的邮件发送过程是：从发送方的用户代理开始，传输到发送方的邮件服务器，再传输到接收方的邮件服务器，然后在这里被分发到接收方的邮箱中。用接收方的用户想要从邮箱中读取邮件时，他的邮件服务器会对用户进行认证。如果发送方发送的邮件无法正确交付给接收方的服务器，那么发送方的用户代理会把邮件存储在一个报文队列中，并在以后尝试再次发送。通常每 30 分钟发送一次，如果一段时间后还发送不成功，服务器就会删除报文队列中的邮件并以电子邮件的方式通知发送方。</p><p><a href="/assets/blog_res/2023-10-08-ApplyProtocol3.assets/image-20231028221609880.png" class="popup img-link "><img data-src="/assets/blog_res/2023-10-08-ApplyProtocol3.assets/image-20231028221609880.png" alt="image-20231028221609880" class="lazyload" data-proofer-ignore></a></p><p>现在你知道了两台邮件服务器邮件发送的大体过程，那么，SMTP 是如何将邮件从 Alice 邮件服务器发送到 Bob 的邮件服务器的呢？主要分为下面三个阶段</p><ol><li>建立连接：在这一阶段，SMTP 客户请求与服务器的25端口建立一个 TCP 连接。一旦连接建立，SMTP 服务器和客户就开始相互通告自己的域名，同时确认对方的域名。<li>邮件传送：一旦连接建立后，就开始邮件传输。SMTP 依靠 TCP 能够将邮件准确无误地传输到接收方的邮件服务器中。SMTP 客户将邮件的源地址、目的地址和邮件的具体内容传递给 SMTP 服务器，SMTP 服务器进行相应的响应并接收邮件。<li>连接释放：SMTP 客户发出退出命令，服务器在处理命令后进行响应，随后关闭 TCP 连接。</ol><h4 id="mime-类型"><span class="mr-2"><strong>MIME 类型</strong></span><a href="#mime-类型" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>最一开始，互联网中的电子邮件只能处理文本格式，后来也逐渐扩展为 MIME 类型，我们上面也简单提到了一句 MIME 类型，MIME (Multipurpose Internet Mail Extensions)是用途互联网邮件扩展类型。</p><p>它是一个互联网标准，扩展了电子邮件标准，使其能够支持很多格式，这些格式如下：</p><ol><li>超文本标记语言文本 .html text/html<li>xml文档 .xml text/xml<li>普通文本 .txt text/plain<li>PNG图像 .png image/png<li>GIF图形 .gif image/gif<li>JPEG图形 .jpeg,.jpg image/jpeg<li>AVI 文件 .avi video/x-msvideo 等。</ol></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/'>计算机网络</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/%E5%AD%A6%E4%B9%A0/" class="post-tag no-text-decoration" >学习</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 本文由作者按照 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 进行授权</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">分享</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE(%E4%B8%89)%20-%20YKFire&url=%2Fposts%2FApplyProtocol3%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE(%E4%B8%89)%20-%20YKFire&u=%2Fposts%2FApplyProtocol3%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=%2Fposts%2FApplyProtocol3%2F&text=%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE(%E4%B8%89)%20-%20YKFire" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="分享链接" data-title-succeed="链接已复制！"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">最近更新</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/ApplyProtocol2/">计算机网络应用层协议(二)</a><li><a href="/posts/ApplyProtocol/">计算机网络应用层协议(一)</a><li><a href="/posts/NetworkOne/">计算机网络发展史(一)</a><li><a href="/posts/NetworkTwo/">计算机网络发展史(二)</a><li><a href="/posts/NetworkThree/">计算机网络发展史(三)</a></ul></div><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/%E5%AD%A6%E4%B9%A0/">学习</a> <a class="post-tag" href="/tags/%E8%81%8C%E4%B8%9A%E8%A7%84%E5%88%92/">职业规划</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">文章内容</div><nav id="toc"></nav></div><script src="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.js"></script></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>相关文章</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/surroundedByAlgorithms/"><div class="card-body"> <em class="small" data-ts="1700983740" data-df="YYYY/MM/DD" > 2023/11/26 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>完蛋！我被算法包围了</h3><div class="text-muted small"><p> 算法在日常生活的应用 算法听上去很复杂，离我们很遥远。但是以下 10 种算法广泛用于我们的日常生活，包括互联网搜索引擎、社交网络、WiFi、手机甚至卫星。 以下是主宰我们世界的十种算法： 01 排序 我们学习算法一般都是从排序算法开始的，比如冒泡排序、快排序、归并排序、堆排序等。 笔者曾经做过的一个大批量对账系统，就是在第一步使用归并外排序（External MergeSort...</p></div></div></a></div><div class="card"> <a href="/posts/MyFirstBlog/"><div class="card-body"> <em class="small" data-ts="1662124620" data-df="YYYY/MM/DD" > 2022/09/02 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>我的第一篇博客！</h3><div class="text-muted small"><p> 我的第一篇博客！ 这里可以放代码片段噢～ //代码片段 int main(){ hello world; }</p></div></div></a></div><div class="card"> <a href="/posts/List/"><div class="card-body"> <em class="small" data-ts="1662694200" data-df="YYYY/MM/DD" > 2022/09/09 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>数据结构--链表</h3><div class="text-muted small"><p> 数据结构–链表 一、链表简介 什么是链表，链表是一种通过指针串联在一起的线性结构，每一个节点由两部分组成，一个是数据域，一个是指针域（存放指向下一个节点的指针），最后一个节点的指针域指向null（空指针的意思） 链接的入口节点称为链表的头结点也就是head 链表的两种操作方法：①直接使用原来的链表进行操作 ②设置一个虚拟头结点进行操作 一般设置一个虚拟头结点来操作...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/ApplyProtocol2/" class="btn btn-outline-primary" prompt="上一篇"><p>计算机网络应用层协议(二)</p></a> <a href="/posts/RPCApply/" class="btn btn-outline-primary" prompt="下一篇"><p>如何设计一个RPC框架?</p></a></div></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/%E5%AD%A6%E4%B9%A0/">学习</a> <a class="post-tag" href="/tags/%E8%81%8C%E4%B8%9A%E8%A7%84%E5%88%92/">职业规划</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://twitter.com/username">YKFire</a>. <span data-toggle="tooltip" data-placement="top" title="除非另有说明，本网站上的博客文章均由作者按照知识共享署名 4.0 国际 (CC BY 4.0) 许可协议进行授权。">保留部分权利。</span></p></div><div class="footer-right"><p class="mb-0">本站由 <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> 生成，采用 <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> 主题。</p></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> (function () { function updateMermaid(event) { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { const mode = event.data.message; if (typeof mermaid === "undefined") { return; } let expectedTheme = (mode === ModeToggle.DARK_MODE ? "dark" : "default"); let config = {theme: expectedTheme}; /* Re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function () { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } let initTheme = "default"; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Create mermaid tag */ $("pre").has("code.language-mermaid").each(function () { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<pre class=\"mermaid\">${svgCode}</pre>`); }); mermaid.initialize(mermaidConf); window.addEventListener("message", updateMermaid); })(); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">搜索结果为空</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/zh.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script>
