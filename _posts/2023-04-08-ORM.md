---
title: ORM框架的选择
date: 2023-04-08 23:07:00 +0800
categories: [技术科普]
tags: [学习]
pin: true
author: YKFire

toc: true
comments: true

math: false
mermaid: true

typora-root-url: ../../YKFire.github.io

---

# ORM框架的选择

**ORM：**是一种为了解决面向对象与关系型数据库中数据类型不匹配的技术，它通过描述Java对象与数据库表之间的映射关系，自动将java应用程序中的对象持久化到关系型数据库的表中；

使用ORM框架后，应用程序不再直接访问底层数据库，而是以面向对象的方式来操作持久化对象，而ORM框架则会通过映射关系将这些面向对象的操作转换成底层的SQL操作。

> 人们常用且熟悉的ORM莫过于mybatis与hibernate，接下来将讲述两者之间的区别以及各自的应用场景。

> mybatis与hibernate两者本身并没有什么优劣之分，重要的还是取决于具体的应用场景与需求。

![image-20230409103706520](/assets/blog_res/2023-04-08-ORM.assets/image-20230409103706520.png)

## 1、概述

**Hibernate：**是一个全表映射的框架。通常开发者只需定义好持久化对象到数据库表的映射关系，就可以通过Hibernate提供的方法完成持久层操作。开发者并不需要熟悉地掌握SQL语句的编写，Hibernate会根据制定的存储逻辑，自动的生成对应的SQL，并调用JDBC接口来执行，所以其开发效率会高于Mybatis。然而Hibernate自身也存在着一些缺点，例如它在多表关联时，对SQL查询的支持较差；更新数据时，需要发送所有字段；不支持存储过程；不能通过优化SQL来优化性能等。这些问题导致其只适合在场景不太复杂且对性能要求不高的项目中使用

**Mybatis：**是一个半自动映射的框架。这里所谓的”半自动"是相对于Hibernate全表映射而言，Mybatis需要手动匹配提供POJO、SQL和映射关系，而Hibernate只需要POJO和映射关系即可。与Hibernate相比，虽然使用Mybatis手动编写SQL要比使用Hibernate的工作量大，但Mybatis可以配置动态SQL并优化SQL，可以通过配置决定SQL的映射规则，它还支持存储过程等。对于一些复杂的和需要优化性能的项目来说，显然使用Mybatis更加合适

## 2、各自的特点

**Mybatis技术特点：**
1、  通过直接编写SQL语句，可以直接对SQL进行性能的优化；

2、  学习门槛低，学习成本低。只要有SQL基础，就可以学习mybatis，而且很容易上手；

3、  由于直接编写SQL语句，所以灵活多变，代码维护性更好。

4、  不能支持数据库无关性，即数据库发生变更，要写多套代码进行支持，移植性不好。

5、  需要编写结果映射。

**Hibernate技术特点：**
1、 标准的orm框架，程序员不需要编写SQL语句。

2、  具有良好的数据库无关性，即数据库发生变化的话，代码无需再次编写。

3、  学习门槛高，需要对数据关系模型有良好的基础，而且在设置OR映射的时候，需要考虑好性能和对象模型的权衡。

4、  程序员不能自主的去进行SQL性能优化。



## 3、区别

- hibernate是全自动的，封装完整，而mybatis是半自动的，灵活更高

  ```tex
  hibernate和mybatis一样都是orm数据库框架，但二者还是有很大区别的，hibernate完全可以通过
  对象关系模型实现对数据库的操作，拥有完整的JavaBean对象与数据库的映射结构来自动生成sql，而
  mybatis仅有基本的字段映射，对象数据以及对象实际关系任然需要通过手写sql来实现和管理
  ```

- hibernate的数据库移植性远大于mybatis

  ```tex
  hibernate通过他强大的映射结构和hql语言，大大降低了对象与数据库（oracle和mysql）的耦合性，
  而mybatis由于需要手写sql,因此与数据库的耦合性直接取决于程序员些sql的方法，如果sql不具通
  用性而用了很多某数据库特有的sql语句的话，移植性也会随之降低很多，成本很高
  ```

- hibernate拥有完整的日志系统，mybatis则欠缺一些

  ```tex
  hibernate日志系统非常健全，涉及广泛，包括：sql记录、关系异常、优化警告、缓存提示、脏数据警告等；
  而mybatis除了基本记录功能外，功能薄弱很多
  ```

- mybatis可以自主进行SQL性能优化，而hibernate不行

  ```tex
  hibernate配置要比mybatis复杂的多，学习成本也比mybatis高，但也正因为mybatis使用简单，
  才导致它要比hibernate关系很多技术细节。mybatis由于不用考虑很多细节，开发模式上与传
  统jdbc区别很小，因此很容易上手并开发项目但忽略细节会导致前期bug比较多，因而开发出
  相对稳定的软件很慢，而开发软件却很快。Hibernate则正好与之相反。但是如果使用hibernate
  很熟练的话，实际上开发效率丝毫不差于甚至超越mybatis。
  ```



## 4、应用场景

- mybatis适用于需求多变的互联网项目
- hibernate适用于需求明确、业务固定的项目 如：OA、ERP项目

> OA项目是指办公自动化项目，它帮助企业处理内部事务，例如公文、内部沟通、协同办公、员工请假、审批流程等
>
> ERP项目是指企业资源计划项目，它主要管理原材料生产制造的软件，如员工、生产、制造、财务、销售、采购、仓储、分销、质量等等



## 5、总结

**mybatis：小巧、方便、高效、简单、直接、半自动**
**hibernate：强大、方便、高效、复杂、绕弯子、全自动**

mybatis：

1. 入门简单，即学即用，提供了数据库查询的自动对象绑定功能，而且延续了很好的SQL使用经验，对于没有那么高的对象模型要求的项目来说，相当完美。

2. 可以进行更为细致的SQL优化，可以减少查询字段。

3. 缺点就是框架还是比较简陋，功能尚有缺失，虽然简化了数据绑定代码，但是整个底层数据库查询实际还是要自己写的，工作量也比较大，而且不太容易适应快速数据库修改。

   > mybatis-plus插件提供了一些基础通用的api，很好的解决了这项问题

4. 二级缓存机制不佳。

hibernate：

1. 功能强大，数据库无关性好，O/R映射能力强，如果你对Hibernate相当精通，而且对Hibernate进行了适当的封装，那么你的项目整个持久层代码会相当简单，需要写的代码很少，开发速度很快，非常爽。
2. 有更好的二级缓存机制，可以使用第三方缓存。
3. 缺点就是学习门槛不低，要精通门槛更高，而且怎么设计O/R映射，在性能和对象模型之间如何权衡取得平衡，以及怎样用好Hibernate方面需要你的经验和能力都很强才行。



举个形象的比喻：
mybatis：机械工具，使用方便，拿来就用，但工作还是要自己来作，不过工具是活的，怎么使由我决定。﻿﻿
hibernate：智能机器人，但研发它（学习、熟练度）的成本很高，工作都可以摆脱他了，但仅限于它能做的事
